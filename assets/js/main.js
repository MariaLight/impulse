"use strict";window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".header-dropdown__btn").forEach((function(e){e.addEventListener("click",(function(){"true"==e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-expanded","true")}))}));var e=document.querySelector(".feedback-swiper");if(e)new Swiper(e,{direction:"horizontal",loop:!1,slidesPerView:1,effect:"fade",pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});var t=document.querySelector("#loadmore"),n=document.querySelectorAll(".calc-table__item.hide");t.addEventListener("click",(function(){n.forEach((function(e){e.classList.remove("hide"),t.classList.add("hide")}))}));var c=document.querySelector(".page");try{var o=function(e){e.classList.remove("modal--active"),l.style.overflowY="",c.classList.remove("modal-open"),function(e){e.removeEventListener("keydown",r),e.removeEventListener("click",i)}(e)},r=function(e){var t=e.currentTarget;"Escape"===e.key&&o(t)},i=function(e){e.currentTarget.querySelector(".modal__content").contains(e.target)||o(e.currentTarget)},a=document.querySelectorAll("[data-modal]"),l=document.querySelector("body"),d=document.querySelectorAll("[data-modal-close]"),s=document.querySelectorAll(".modal");a.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),s.forEach((function(e){o(e)}));var t=e.target.closest("[data-modal]").getAttribute("data-modal"),n=document.getElementById(t);n&&(n.classList.add("modal--active"),l.style.overflowY="hidden",c.classList.add("modal-open"),function(e){e.addEventListener("keydown",r),e.addEventListener("click",i)}(n))}))})),d.forEach((function(e){e.addEventListener("click",(function(e){var t=e.target.closest(".modal");t&&o(t)}))}))}catch(e){}try{Fancybox.bind("[data-fancybox]",{})}catch(e){}var u=document.querySelectorAll('input[name="clients"]'),m=document.getElementById("client"),L=document.getElementById("month"),v=document.getElementById("year"),y=document.getElementById("more"),f={clients100:{client:220,month:22e3,year:264e3},clients300:{client:120,month:36e3,year:432e3},clients500:{client:100,month:5e4,year:6e5},clients1000:{client:80,month:8e4,year:96e4}};S(f,m,L,v),u.forEach((function(e){e.addEventListener("change",(function(){p(),g.addEventListener("input",p)}))}));var g=document.getElementById("range"),E=document.getElementById("rangeV"),p=function(){var e=Number(100*(g.value-g.min)/(g.max-g.min)),t=10-.2*e;E.innerHTML="<span>"+g.value+"</span>",E.style.left="calc("+e+"% + ("+t+"px))",S(f,m,L,v,g.value)};function S(e,t,n,c,o){var r=document.querySelector('input[name="clients"]:checked').value,i=25*o;"100"==r?(t.innerHTML=e.clients100.client.toLocaleString()+" руб.",n.innerHTML=(e.clients100.month+i).toLocaleString()+" руб.",c.innerHTML=(e.clients100.year+i).toLocaleString()+" руб."):"300"==r?(t.innerHTML=e.clients300.client.toLocaleString()+" руб.",n.innerHTML=(e.clients300.month+i).toLocaleString()+" руб.",c.innerHTML=(e.clients300.year+i).toLocaleString()+" руб."):"500"==r?(t.innerHTML=e.clients500.client.toLocaleString()+" руб.",n.innerHTML=(e.clients500.month+i).toLocaleString()+" руб.",c.innerHTML=(e.clients500.year+i).toLocaleString()+" руб."):(t.innerHTML=e.clients1000.client.toLocaleString()+" руб.",n.innerHTML=(e.clients1000.month+i).toLocaleString()+" руб.",c.innerHTML=(e.clients1000.year+i).toLocaleString()+" руб."),y.innerHTML=i.toLocaleString()+" руб."}p(),g.addEventListener("input",p);var h=document.querySelector(".burger"),T=document.querySelector(".header-burder__menu"),b=T.querySelectorAll(".header__link");h.addEventListener("click",(function(){T.classList.toggle("active"),c.classList.toggle("modal-open")})),b.forEach((function(e){e.addEventListener("click",(function(){T.classList.remove("active"),c.classList.remove("modal-open")}))}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIiwicGFnZXNEcm9wZG93biIsInNldEF0dHJpYnV0ZSIsImZlZWRiYWNrU3dpcGVyIiwicXVlcnlTZWxlY3RvciIsIlN3aXBlciIsImxvb3AiLCJzbGlkZXNQZXJWaWV3IiwiZWZmZWN0IiwiZWwiLCJ0eXBlIiwibmV4dEVsIiwicHJldkVsIiwiYmxvY2siLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJsb2FkbW9yZUJ0biIsImFkZCIsImxvYWRtb3JlQmxvY2tzIiwiaHRtbCIsIm1vZGFscyIsImNsb3NlTW9kYWwiLCJtb2RhbCIsImJvZHkiLCJvdmVyZmxvd1kiLCJidG4iLCJlIiwicHJldmVudERlZmF1bHQiLCJvbk1vZGFsS2V5RG93biIsImNsb3NlQWxsQnRucyIsIm9uTW9kYWxDbGljayIsImFkZE1vZGFsRXZlbnRMaXN0ZW5lcnMiLCJjdXJyZW50VGFyZ2V0IiwiYnRuQ2xvc2UiLCJjbG9zZSIsImNvbnRhaW5zIiwidGFyZ2V0IiwiZXJyb3IiLCJidG5zIiwicmVtb3ZlTW9kYWxFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJtb2RhbElkIiwiY2xvc2VzdCIsImdldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJtb2RhbHNBbGwiLCJtb2RhbENvbnRlbnQiLCJjYWxjUmVzdWx0TW9udGgiLCJtb3JlIiwiY2FsY0lucHV0cyIsImNhbGNSZXN1bHRDbGllbnQiLCJjYWxjUmVzdWx0WWVhciIsImNhbGNSZXN1bHRNb3JlIiwiY2FsY051bXMiLCJjbGllbnRzMTAwIiwiY2xpZW50IiwibW9udGgiLCJ5ZWFyIiwiY2xpZW50czMwMCIsImlucHV0Iiwic2V0VmFsdWUiLCJyYW5nZSIsImNsaWVudHMxMDAwIiwicmFuZ2VWIiwiaW5uZXJIVE1MIiwibGVmdCIsImNhbGMiLCJnZXRWYWx1ZSIsInZhbHVlIiwibWluIiwibWF4IiwiY2FsY01vcmVTcGFjZSIsInJhbmdlVmFsdWUiLCJuZXdWYWx1ZSIsInRvTG9jYWxlU3RyaW5nIiwiYnVyZ2VyTWVudSIsImJ1cmdlck1lbnVMaXN0IiwiYnVyZ2VyQnRuIiwiY2xpZW50czUwMCIsInRvZ2dsZSJdLCJtYXBwaW5ncyI6ImFBQUFBLE9BQU9DLGlCQUFpQixvQkFBb0IsV0FBcEJDLFNBQUFDLGlCQUFvQix5QkFHMUJDLFNBQVEsU0FBQUMsR0FEbEJDLEVBQUFBLGlCQUFnQkosU0FBU0MsV0FDQyxRQUE5QkcsRUFBY0YsYUFBUSxpQkFDYkgsRUFBQUEsYUFBaUIsZ0JBQXFCLFNBQ3ZDSSxFQUdPRSxhQUFBLGdCQUFBLE9BSlgsR0FESixJQWNBLElBQUlDLEVBQWdCTixTQUFBTyxjQUFBLG9CQUNoQixHQUFBRCxFQUNlLElBQUFFLE9BQUFGLEVBRDJCLENBRXRDRyxVQUZzQyxhQUd0Q0MsTUFBQUEsRUFDQUMsY0FKc0MsRUFJdENBLE9BQVEsT0FHSkMsV0FBSSxDQUNKQyxHQUFBQSxxQkFSa0NBLEtBQUEsWUFZbENDLFdBQVEsQ0FDUkMsT0FBUSxzQkFGQUEsT0FBQSx5QkFjWkMsSUFBQUEsRUFBTUMsU0FBVUMsY0FBaEIsYUFDQUMsRUFBWUYsU0FBVUcsaUJBQXRCLDBCQUNIRCxFQUhEcEIsaUJBQUEsU0FBQSxXQURKc0IsRUFBQW5CLFNBQUEsU0FBQWMsR0FNSU0sRUFBT3RCLFVBQVNPLE9BQUFBLFFBSFpZLEVBQVlGLFVBQVVHLElBQUksT0FLOUIsR0FBQSxJQXVCSUcsSUFBQUEsRUFBQUEsU0FBT3JCLGNBQVEsU0FFZCxJQUFBLElBWkdzQixFQUFBLFNBQVdDLEdBQ1BBLEVBQUFBLFVBQU1SLE9BQU4saUJBQ0FTLEVBQUFBLE1BQUFBLFVBQVdDLEdBQ1hMLEVBQUFBLFVBQUtMLE9BQUwsY0FSUlcsU0FBOEJILEdBQzFCSSxFQUFFQyxvQkFBRixVQUFBQyxHQUNBQyxFQUFBQSxvQkFBQSxRQUFBQyxF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U0FBUyxXQUMzQmlGLEVBQVcvRCxVQUFVQyxPQUFPLFVBRTVCSSxFQUFLTCxVQUFVQyxPQUFPLGFBRXpCLEdBQ0osR0FFSiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgbGV0IHBhZ2VzRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlYWRlci1kcm9wZG93bl9fYnRuXCIpO1xyXG4gICAgcGFnZXNEcm9wZG93bi5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmdldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIikgPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcImZhbHNlXCIpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcInRydWVcIik7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG5cclxuICAgIGxldCBmZWVkYmFja1N3aXBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVkYmFjay1zd2lwZXInKTtcclxuICAgIGlmIChmZWVkYmFja1N3aXBlcikge1xyXG4gICAgICAgIGNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoZmVlZGJhY2tTd2lwZXIsIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICBlZmZlY3Q6ICdmYWRlJyxcclxuXHJcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdmcmFjdGlvbidcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1idXR0b24tcHJldicsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICBsZXQgbG9hZG1vcmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9hZG1vcmUnKTtcclxuICAgIGxldCBsb2FkbW9yZUJsb2NrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjLXRhYmxlX19pdGVtLmhpZGUnKTtcclxuICAgIGxvYWRtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRtb3JlQmxvY2tzLmZvckVhY2goZnVuY3Rpb24gKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuICAgICAgICAgICAgbG9hZG1vcmVCdG4uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgbGV0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZGFsXScpO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICAgICAgY29uc3QgYnRuQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tb2RhbC1jbG9zZV0nKTtcclxuICAgICAgICBjb25zdCBtb2RhbHNBbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwnKTtcclxuXHJcblxyXG4gICAgICAgIGJ0bnMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGNsb3NlQWxsQnRucyhtb2RhbHNBbGwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWxJZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLW1vZGFsXScpLmdldEF0dHJpYnV0ZSgnZGF0YS1tb2RhbCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElkKTtcclxuICAgICAgICAgICAgICAgIGlmIChtb2RhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhZGRNb2RhbEV2ZW50TGlzdGVuZXJzKG1vZGFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZnVuY3Rpb24gY2xvc2VBbGxCdG5zKG1vZGFscykge1xyXG4gICAgICAgICAgICBtb2RhbHMuZm9yRWFjaChtb2RhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ0bkNsb3NlLmZvckVhY2goY2xvc2UgPT4ge1xyXG4gICAgICAgICAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBlLnRhcmdldC5jbG9zZXN0KCcubW9kYWwnKTtcclxuICAgICAgICAgICAgICAgIGlmIChtb2RhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkTW9kYWxFdmVudExpc3RlbmVycyhtb2RhbCkge1xyXG4gICAgICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25Nb2RhbEtleURvd24pO1xyXG4gICAgICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uTW9kYWxDbGljayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVNb2RhbEV2ZW50TGlzdGVuZXJzKG1vZGFsKSB7XHJcbiAgICAgICAgICAgIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbk1vZGFsS2V5RG93bik7XHJcbiAgICAgICAgICAgIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Nb2RhbENsaWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcclxuICAgICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93WSA9ICcnO1xyXG4gICAgICAgICAgICBodG1sLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLW9wZW4nKTtcclxuXHJcbiAgICAgICAgICAgIHJlbW92ZU1vZGFsRXZlbnRMaXN0ZW5lcnMobW9kYWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25Nb2RhbEtleURvd24oZSkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IGUuY3VycmVudFRhcmdldDtcclxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uTW9kYWxDbGljayhlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsQ29udGVudCA9IGUuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2NvbnRlbnQnKTtcclxuICAgICAgICAgICAgaWYgKCFtb2RhbENvbnRlbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgRmFuY3lib3guYmluZChcIltkYXRhLWZhbmN5Ym94XVwiLCB7XHJcbiAgICAgICAgICAgIC8vIFlvdXIgY3VzdG9tIG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIGxldCBjYWxjSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cImNsaWVudHNcIl0nKTtcclxuICAgIGxldCBjYWxjUmVzdWx0Q2xpZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsaWVudCcpO1xyXG4gICAgbGV0IGNhbGNSZXN1bHRNb250aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb250aCcpO1xyXG4gICAgbGV0IGNhbGNSZXN1bHRZZWFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3llYXInKTtcclxuICAgIGxldCBjYWxjUmVzdWx0TW9yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb3JlJyk7XHJcbiAgICBsZXQgbW9yZSA9IDI1O1xyXG5cclxuICAgIGxldCBjYWxjTnVtcyA9IHtcclxuICAgICAgICAnY2xpZW50czEwMCc6IHtcclxuICAgICAgICAgICAgJ2NsaWVudCc6IDIyMCxcclxuICAgICAgICAgICAgJ21vbnRoJzogMjIwMDAsXHJcbiAgICAgICAgICAgICd5ZWFyJzogMjY0MDAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnY2xpZW50czMwMCc6IHtcclxuICAgICAgICAgICAgJ2NsaWVudCc6IDEyMCxcclxuICAgICAgICAgICAgJ21vbnRoJzogMzYwMDAsXHJcbiAgICAgICAgICAgICd5ZWFyJzogNDMyMDAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnY2xpZW50czUwMCc6IHtcclxuICAgICAgICAgICAgJ2NsaWVudCc6IDEwMCxcclxuICAgICAgICAgICAgJ21vbnRoJzogNTAwMDAsXHJcbiAgICAgICAgICAgICd5ZWFyJzogNjAwMDAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAnY2xpZW50czEwMDAnOiB7XHJcbiAgICAgICAgICAgICdjbGllbnQnOiA4MCxcclxuICAgICAgICAgICAgJ21vbnRoJzogODAwMDAsXHJcbiAgICAgICAgICAgICd5ZWFyJzogOTYwMDAwXHJcbiAgICAgICAgfSxcclxuICAgIH1cclxuICAgIGNhbGMoY2FsY051bXMsIGNhbGNSZXN1bHRDbGllbnQsIGNhbGNSZXN1bHRNb250aCwgY2FsY1Jlc3VsdFllYXIpO1xyXG4gICAgY2FsY0lucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgcmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBzZXRWYWx1ZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBjb25zdFxyXG4gICAgICAgIHJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhbmdlJyksXHJcbiAgICAgICAgcmFuZ2VWID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhbmdlVicpLFxyXG4gICAgICAgIHNldFZhbHVlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdFxyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBOdW1iZXIoKHJhbmdlLnZhbHVlIC0gcmFuZ2UubWluKSAqIDEwMCAvIChyYW5nZS5tYXggLSByYW5nZS5taW4pKSxcclxuICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uID0gMTAgLSAobmV3VmFsdWUgKiAwLjIpO1xyXG4gICAgICAgICAgICByYW5nZVYuaW5uZXJIVE1MID0gYDxzcGFuPiR7cmFuZ2UudmFsdWV9PC9zcGFuPmA7XHJcbiAgICAgICAgICAgIHJhbmdlVi5zdHlsZS5sZWZ0ID0gYGNhbGMoJHtuZXdWYWx1ZX0lICsgKCR7bmV3UG9zaXRpb259cHgpKWA7XHJcbiAgICAgICAgICAgIGNhbGMoY2FsY051bXMsIGNhbGNSZXN1bHRDbGllbnQsIGNhbGNSZXN1bHRNb250aCwgY2FsY1Jlc3VsdFllYXIsIHJhbmdlLnZhbHVlKTtcclxuXHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0VmFsdWUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIoKHJhbmdlLnZhbHVlIC0gcmFuZ2UubWluKSAqIDEwMCAvIChyYW5nZS5tYXggLSByYW5nZS5taW4pKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIHNldFZhbHVlKCk7XHJcbiAgICByYW5nZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHNldFZhbHVlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjYWxjKGNhbGNOdW1zLCBjYWxjUmVzdWx0Q2xpZW50LCBjYWxjUmVzdWx0TW9udGgsIGNhbGNSZXN1bHRZZWFyLCByYW5nZVZhbHVlKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImNsaWVudHNcIl06Y2hlY2tlZCcpLnZhbHVlO1xyXG4gICAgICAgIGxldCBjYWxjTW9yZVNwYWNlID0gcmFuZ2VWYWx1ZSAqIG1vcmU7XHJcbiAgICAgICAgaWYgKHZhbHVlID09ICcxMDAnKSB7XHJcbiAgICAgICAgICAgIGNhbGNSZXN1bHRDbGllbnQuaW5uZXJIVE1MID0gY2FsY051bXMuY2xpZW50czEwMC5jbGllbnQudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcbiAgICAgICAgICAgIGNhbGNSZXN1bHRNb250aC5pbm5lckhUTUwgPSAoY2FsY051bXMuY2xpZW50czEwMC5tb250aCArIGNhbGNNb3JlU3BhY2UpLnRvTG9jYWxlU3RyaW5nKCkgKyAnINGA0YPQsS4nO1xyXG4gICAgICAgICAgICBjYWxjUmVzdWx0WWVhci5pbm5lckhUTUwgPSAoY2FsY051bXMuY2xpZW50czEwMC55ZWFyICsgY2FsY01vcmVTcGFjZSkudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gJzMwMCcpIHtcclxuICAgICAgICAgICAgY2FsY1Jlc3VsdENsaWVudC5pbm5lckhUTUwgPSBjYWxjTnVtcy5jbGllbnRzMzAwLmNsaWVudC50b0xvY2FsZVN0cmluZygpICsgJyDRgNGD0LEuJztcclxuICAgICAgICAgICAgY2FsY1Jlc3VsdE1vbnRoLmlubmVySFRNTCA9IChjYWxjTnVtcy5jbGllbnRzMzAwLm1vbnRoICsgY2FsY01vcmVTcGFjZSkudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcbiAgICAgICAgICAgIGNhbGNSZXN1bHRZZWFyLmlubmVySFRNTCA9IChjYWxjTnVtcy5jbGllbnRzMzAwLnllYXIgKyBjYWxjTW9yZVNwYWNlKS50b0xvY2FsZVN0cmluZygpICsgJyDRgNGD0LEuJztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09ICc1MDAnKSB7XHJcbiAgICAgICAgICAgIGNhbGNSZXN1bHRDbGllbnQuaW5uZXJIVE1MID0gY2FsY051bXMuY2xpZW50czUwMC5jbGllbnQudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcbiAgICAgICAgICAgIGNhbGNSZXN1bHRNb250aC5pbm5lckhUTUwgPSAoY2FsY051bXMuY2xpZW50czUwMC5tb250aCArIGNhbGNNb3JlU3BhY2UpLnRvTG9jYWxlU3RyaW5nKCkgKyAnINGA0YPQsS4nO1xyXG4gICAgICAgICAgICBjYWxjUmVzdWx0WWVhci5pbm5lckhUTUwgPSAoY2FsY051bXMuY2xpZW50czUwMC55ZWFyICsgY2FsY01vcmVTcGFjZSkudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNhbGNSZXN1bHRDbGllbnQuaW5uZXJIVE1MID0gY2FsY051bXMuY2xpZW50czEwMDAuY2xpZW50LnRvTG9jYWxlU3RyaW5nKCkgKyAnINGA0YPQsS4nO1xyXG4gICAgICAgICAgICBjYWxjUmVzdWx0TW9udGguaW5uZXJIVE1MID0gKGNhbGNOdW1zLmNsaWVudHMxMDAwLm1vbnRoICsgY2FsY01vcmVTcGFjZSkudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcbiAgICAgICAgICAgIGNhbGNSZXN1bHRZZWFyLmlubmVySFRNTCA9IChjYWxjTnVtcy5jbGllbnRzMTAwMC55ZWFyICsgY2FsY01vcmVTcGFjZSkudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhbGNSZXN1bHRNb3JlLmlubmVySFRNTCA9IGNhbGNNb3JlU3BhY2UudG9Mb2NhbGVTdHJpbmcoKSArICcg0YDRg9CxLic7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGxldCBidXJnZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyJyk7XHJcbiAgICBsZXQgYnVyZ2VyTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItYnVyZGVyX19tZW51Jyk7XHJcbiAgICBsZXQgYnVyZ2VyTWVudUxpc3QgPSBidXJnZXJNZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX2xpbmsnKVxyXG4gICAgYnVyZ2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGJ1cmdlck1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgaHRtbC5jbGFzc0xpc3QudG9nZ2xlKCdtb2RhbC1vcGVuJyk7XHJcbiAgICB9KVxyXG5cclxuICAgIGJ1cmdlck1lbnVMaXN0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYnVyZ2VyTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIGh0bWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtb3BlbicpO1xyXG5cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbn0pIl19
